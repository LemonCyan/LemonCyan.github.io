
<!DOCTYPE html><html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="hexo-theme" content="https://github.com/xaoxuu/hexo-theme-stellar/tree/1.30.1" theme-name="Stellar" theme-version="1.30.1">
  
  <meta name="generator" content="Hexo 7.3.0">
  <meta http-equiv='x-dns-prefetch-control' content='on' />
  
  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True" >
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000">
  <meta name="theme-color" content="#f9fafb">
  
  <title>字节序与位序详解-CSDN博客 - WhiteLemonade</title>

  
    <meta name="description" content="Endianness字节序大家见得比较多，网络上论述也比较多。这里简要介绍：书写十六进制数据时，我们习惯上 MSB 在左，而 LSB 在右。  LSB: least significant byte MSB: most significant byte   大端：Big-endian数据在内存中(地址由低到高)的存放顺序和书写顺序是一致的。记忆方法：低地址放的是数据的 MSB，所以称作大端。低地址">
<meta property="og:type" content="article">
<meta property="og:title" content="字节序与位序详解-CSDN博客">
<meta property="og:url" content="http://liuluhua.github.io/2025/01/16/2-%E8%AF%AD%E8%A8%80-C%E8%AF%AD%E8%A8%80-%E4%BD%8D%E8%BF%90%E7%AE%97-%E5%AD%97%E8%8A%82%E5%BA%8F%E4%B8%8E%E4%BD%8D%E5%BA%8F%E8%AF%A6%E8%A7%A3-CSDN%E5%8D%9A%E5%AE%A2/index.html">
<meta property="og:site_name" content="WhiteLemonade">
<meta property="og:description" content="Endianness字节序大家见得比较多，网络上论述也比较多。这里简要介绍：书写十六进制数据时，我们习惯上 MSB 在左，而 LSB 在右。  LSB: least significant byte MSB: most significant byte   大端：Big-endian数据在内存中(地址由低到高)的存放顺序和书写顺序是一致的。记忆方法：低地址放的是数据的 MSB，所以称作大端。低地址">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/ecf2236c6a3748a7dc0e9b34e8099691.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/14b04457eda94f3c673f48e92011fe21.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/614dec76a8c050b4c636fa96b3bc623e.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/fd0194c5d55e89ff9c62159e259ea903.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/cc6e93aa08e0d07424e20802789150c7.png">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/585822dd5ffe728c8a3a325e1744ac62.png">
<meta property="article:published_time" content="2025-01-15T16:00:00.000Z">
<meta property="article:modified_time" content="2025-01-15T16:00:00.000Z">
<meta property="article:author" content="liuluhua">
<meta property="article:tag" content="clippings">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i-blog.csdnimg.cn/blog_migrate/ecf2236c6a3748a7dc0e9b34e8099691.png">
  
  
  
  <meta name="keywords" content="clippings">

  <!-- feed -->
  

  <link rel="stylesheet" href="/css/main.css?v=1.30.1">


  

  

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/satouriko/LxgwWenKai_Webfonts@v1.101/dist/LXGWWenKaiMono-Bold.css" />
</head>
<body>

<div class="l_body content tech" id="start" layout="post" ><aside class="l_left"><div class="leftbar-container">


<header class="header"><div class="logo-wrap"><a class="avatar" href="/"><div class="bg" style="opacity:0;background-image:url(https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/avatar/round/rainbow64@3x.webp);"></div><img no-lazy class="avatar" src="https://raw.staticdn.net/liuluhua/liuluhua.github.io/ImageBed/BlogRes/avatar.jpg" onerror="javascript:this.classList.add('error');this.src='https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/image/2659360.svg';"></a><a class="title" href="/"><div class="main" ff="title">WhiteLemonade</div><div class="sub cap">WhiteLemonade的充电站</div></a></div></header>

<div class="nav-area">
<div class="search-wrapper" id="search-wrapper"><form class="search-form"><a class="search-button" onclick="document.getElementById(&quot;search-input&quot;).focus();"><svg t="1705074644177" viewBox="0 0 1025 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1560" width="200" height="200"><path d="M1008.839137 935.96571L792.364903 719.491476a56.783488 56.783488 0 0 0-80.152866 0 358.53545 358.53545 0 1 1 100.857314-335.166073 362.840335 362.840335 0 0 1-3.689902 170.145468 51.248635 51.248635 0 1 0 99.217358 26.444296 462.057693 462.057693 0 1 0-158.255785 242.303546l185.930047 185.725053a51.248635 51.248635 0 0 0 72.568068 0 51.248635 51.248635 0 0 0 0-72.978056z" p-id="1561"></path><path d="M616.479587 615.969233a50.428657 50.428657 0 0 0-61.498362-5.534852 174.655348 174.655348 0 0 1-177.525271 3.484907 49.403684 49.403684 0 0 0-58.833433 6.76482l-3.074918 2.869923a49.403684 49.403684 0 0 0 8.609771 78.10292 277.767601 277.767601 0 0 0 286.992355-5.739847 49.403684 49.403684 0 0 0 8.404776-76.667958z" p-id="1562"></path></svg></a><input type="text" class="search-input" id="search-input" placeholder="Search"></form><div id="search-result"></div><div class="search-no-result">No Results!</div></div>


<nav class="menu dis-select"></nav>
</div>
<div class="widgets">


<widget class="widget-wrapper post-list"><div class="widget-header dis-select"><span class="name">Recent Update</span></div><div class="widget-body fs14"><a class="item title" href="/2025/06/13/2-%E8%AF%AD%E8%A8%80-C%E8%AF%AD%E8%A8%80-%E5%87%BD%E6%95%B0-%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0%E5%87%BD%E6%95%B0%E8%AF%A6%E8%A7%A3/"><span class="title">可变参数函数详解</span></a><a class="item title" href="/2025/06/13/1-%E5%B9%B3%E5%8F%B0-Linux-IO-%E6%A0%87%E5%87%86IO%E5%87%BD%E6%95%B0/"><span class="title">标准IO函数</span></a><a class="item title" href="/2025/06/13/1-%E5%B9%B3%E5%8F%B0-Linux-IO-%E6%A0%87%E5%87%86IO/"><span class="title">标准IO</span></a><a class="item title" href="/2024/06/07/1-%E5%B9%B3%E5%8F%B0-Linux-IO-%E6%96%87%E4%BB%B6IO/"><span class="title">文件IO</span></a><a class="item title" href="/2025/06/13/1-%E5%B9%B3%E5%8F%B0-Linux-IO-%E6%96%87%E4%BB%B6IO%E5%92%8C%E6%A0%87%E5%87%86IO/"><span class="title">文件IO和标准IO</span></a><a class="item title" href="/2023/09/14/4-%E8%BD%AF%E4%BB%B6-%E6%95%B0%E6%8D%AE%E5%BA%93-%E5%B0%86MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8B%B7%E8%B4%9D%E5%88%B0%E5%8F%A6%E4%B8%80%E5%8F%B0%E6%9C%BA%E5%99%A8/"><span class="title">将MySQL数据库拷贝到另一台机器</span></a><a class="item title" href="/2025/03/07/1-%E5%B9%B3%E5%8F%B0-Linux-%E8%BF%9B%E7%A8%8B%E7%BA%BF%E7%A8%8B-%E8%BF%9B%E7%A8%8B%E4%B8%8A%E4%B8%8B%E6%96%87/"><span class="title">进程上下文</span></a><a class="item title" href="/2024/04/16/1-%E5%B9%B3%E5%8F%B0-%E6%9C%8D%E5%8A%A1%E5%99%A8-%E5%BE%AE%E4%BF%A1-%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%90%8E%E7%AB%AF%E9%85%8D%E7%BD%AE/"><span class="title">微信公众号后端配置</span></a><a class="item title" href="/2025/05/06/4-%E8%BD%AF%E4%BB%B6-AI-OpenAI-%E5%9B%BE%E5%83%8F%E5%92%8C%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E8%84%9A%E6%9C%AC/"><span class="title">OpenAI 图像和文本处理脚本</span></a><a class="item title" href="/2025/04/08/2-%E8%AF%AD%E8%A8%80-Qt-%E7%BC%96%E8%AF%91-QMake-%E5%92%8C-CMake-%E5%AF%B9%E6%AF%94/"><span class="title">QMake 和 CMake 对比</span></a></div></widget>
</div>

</div></aside><div class="l_main" id="main">





<div class="article banner top">
  <div class="content">
    <div class="top bread-nav footnote"><div class="left"><div class="flex-row" id="breadcrumb"><a class="cap breadcrumb" href="/">Home</a>
<span class="sep"></span><a class="cap breadcrumb" href="/">Blog</a><span class="sep"></span><a class="cap breadcrumb-link" href="/categories/2-%E8%AF%AD%E8%A8%80/">2.语言</a> <span class="sep"></span> <a class="cap breadcrumb-link" href="/categories/2-%E8%AF%AD%E8%A8%80/C%E8%AF%AD%E8%A8%80/">C语言</a> <span class="sep"></span> <a class="cap breadcrumb-link" href="/categories/2-%E8%AF%AD%E8%A8%80/C%E8%AF%AD%E8%A8%80/%E4%BD%8D%E8%BF%90%E7%AE%97/">位运算</a></div>
<div class="flex-row" id="post-meta"><span class="text created">Posted on: <time datetime="2025-01-15T16:00:00.000Z">2025-01-16</time></span><span class="sep updated"></span><span class="text updated">Updated on: <time datetime="2025-01-15T16:00:00.000Z">2025-01-16</time></span></div></div></div>
    
    <div class="bottom only-title">
      
      <div class="text-area">
        <h1 class="text title"><span>字节序与位序详解-CSDN博客</span></h1>
        
      </div>
    </div>
    
  </div>
  </div><article class="md-text content"><h3 id="Endianness"><a href="#Endianness" class="headerlink" title="Endianness"></a>Endianness</h3><p><a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E5%AD%97%E8%8A%82%E5%BA%8F&spm=1001.2101.3001.7020">字节序</a>大家见得比较多，网络上论述也比较多。这里简要介绍：<br>书写十六进制数据时，我们习惯上 <a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=MSB&spm=1001.2101.3001.7020">MSB</a> 在左，而 LSB 在右。</p>
<ol>
<li>LSB: least significant byte</li>
<li>MSB: most significant byte</li>
</ol>
<ul>
<li>大端：Big-endian<br><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://i-blog.csdnimg.cn/blog_migrate/ecf2236c6a3748a7dc0e9b34e8099691.png" alt="大端"><br>数据在内存中(地址由低到高)的存放顺序和书写顺序是一致的。<br>记忆方法：低地址放的是数据的 MSB，所以称作大端。<br>低地址存 MSB，高地址存 <a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=LSB&spm=1001.2101.3001.7020">LSB</a>。</li>
<li>小端：Litthle-endian<br><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://i-blog.csdnimg.cn/blog_migrate/14b04457eda94f3c673f48e92011fe21.png" alt="小端"><br>数据在内存中(地址由低到高)的存放顺序和书写顺序是相反的。<br>记忆方法：低地址放的是数据的 LSB，所以称作小端。即“高高低低”。<br>低地址存 LSB，高地址存 MSB。</li>
</ul>
<h3 id="如何写出兼容大小端的代码"><a href="#如何写出兼容大小端的代码" class="headerlink" title="如何写出兼容大小端的代码"></a>如何写出兼容大小端的代码</h3><p>编码时如果不注意大小端的问题，容易在可移植性上打折扣，并且出问题时不容易定位。特别是指针操作，常见的问题如下：</p>
<ul>
<li>将长类型数据强转成短类型的指针进行操作</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">long</span> <span class="type">long</span> val = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">((<span class="type">int</span> *)&amp;val)</span></span>;</span><br><span class="line">...</span><br><span class="line"><span class="built_in">check</span>(val);</span><br><span class="line"></span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure>

<p>上面的代码在大端情况下就容易出问题。例如 func 里将 &amp;val 处赋值 <code>int</code> 类型的数据 <code>0x1122,3344</code>。check(val) 时，由于 val 为 8 字节的数据，此时实际读取到的值为 <code>0x1122,3344,0000,0000</code>。小端场景则无此问题，读者可以自己思考一下为什么。</p>
<h3 id="Bit-numbering"><a href="#Bit-numbering" class="headerlink" title="Bit numbering"></a>Bit numbering</h3><p>我们知道一个字节有 8 个比特位。从第 0 位到第 7 位共 8 位。位序描述比特位在字节中的存放顺序。<br>可参阅 <a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/Bit_numbering">维基百科中关于位序的描述</a>。</p>
<p>这里的 LSB 及 MSB 的用词代表的是：</p>
<ol>
<li>LSB是指 least significant bit</li>
<li>MSB是指 most significant bit</li>
</ol>
<p>位序分为两种：</p>
<ul>
<li>LSB 0<br>字节的第 0 位存放数据的 <code>least significant bit</code>，即我们的数据的最低位存放在字节的第 0 位。<br>以十进制150为例，<code>0b10010110</code>。在LSB 0方式下存放形式为：</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">| <span class="number">7</span>                           <span class="number">0</span> |</span><br><span class="line">---------------------------------</span><br><span class="line">| <span class="number">1</span> | <span class="number">0</span> | <span class="number">0</span> | <span class="number">1</span> | <span class="number">0</span> | <span class="number">1</span> | <span class="number">1</span> | <span class="number">0</span> |</span><br><span class="line">---------------------------------</span><br><span class="line"></span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure>

<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://i-blog.csdnimg.cn/blog_migrate/614dec76a8c050b4c636fa96b3bc623e.png" alt="在这里插入图片描述"></p>
<blockquote>
<p>Least Significant Bit First means that the least significant bit will arrive first.</p>
</blockquote>
<p>数据流从 bit0 开始传送，故数据流出现的顺序是 <code>01101001</code>。</p>
<ul>
<li>MSB 0<br>字节的第 0 位存放数据的 <code>most significant bit</code>，即我们的数据的最高位存放在字节的第 0 位。<br>以十进制150为例，<code>0b10010110</code>。在MSB 0方式下存放形式为：</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">| <span class="number">7</span>                           <span class="number">0</span> |</span><br><span class="line">---------------------------------</span><br><span class="line">| <span class="number">0</span> | <span class="number">1</span> | <span class="number">1</span> | <span class="number">0</span> | <span class="number">1</span> | <span class="number">0</span> | <span class="number">0</span> | <span class="number">1</span> |</span><br><span class="line">---------------------------------</span><br><span class="line"></span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure>

<p><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://i-blog.csdnimg.cn/blog_migrate/fd0194c5d55e89ff9c62159e259ea903.png" alt="在这里插入图片描述"></p>
<blockquote>
<p>Most Significant Bit First means that the most significant bit will arrive first.</p>
</blockquote>
<p>也就是说数据流出现的顺序是 <code>10010110</code>。</p>
<h3 id="实际机器类型"><a href="#实际机器类型" class="headerlink" title="实际机器类型"></a>实际机器类型</h3><p>字节序是小端的 CPU 通常其位序为 LSB 0。数据不仅在内存中是“高高低低”存放，其位序也是“高高低低”放置的，即 msb 放在 bit7 位置上，lsb 放置在 bit0 位置上。值得注意的是，字节序是大端的 CPU 采用的位序却不是那么统一，既有 MSB 0，也要 LSB 0 的机器。</p>
<blockquote>
<p>Bit order usually follows the same endianness as the byte order for a given computer system. That is, in a big endian system the most significant bit is stored at the lowest bit address; in a little endian system, the least significant bit is stored at the lowest bit address.</p>
</blockquote>
<p>如果我们要表示一个整数 <code>0xabcd</code>。</p>
<p>Write Integer for Big Endian System</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">byte  addr       <span class="number">0</span>         <span class="number">1</span>       <span class="number">2</span>        <span class="number">3</span></span><br><span class="line">bit  offset  <span class="number">01234567</span> <span class="number">01234567</span> <span class="number">01234567</span> <span class="number">01234567</span></span><br><span class="line">     binary  <span class="number">00001010</span> <span class="number">00001011</span> <span class="number">00001100</span> <span class="number">00001101</span></span><br><span class="line">        hex     <span class="number">0</span>a       <span class="number">0b</span>      <span class="number">0</span>c        <span class="number">0</span>d</span><br><span class="line"></span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure>

<p>Write Integer for Little Endian System</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">byte  addr      <span class="number">3</span>         <span class="number">2</span>       <span class="number">1</span>        <span class="number">0</span></span><br><span class="line">bit  offset  <span class="number">76543210</span> <span class="number">76543210</span> <span class="number">76543210</span> <span class="number">76543210</span></span><br><span class="line">     binary  <span class="number">00001010</span> <span class="number">00001011</span> <span class="number">00001100</span> <span class="number">00001101</span></span><br><span class="line">        hex     <span class="number">0</span>a       <span class="number">0b</span>      <span class="number">0</span>c        <span class="number">0</span>d</span><br><span class="line"></span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure>

<h3 id="位域-Bit-Fields"><a href="#位域-Bit-Fields" class="headerlink" title="位域 Bit Fields"></a>位域 Bit Fields</h3><blockquote>
<p>For big-endian mode, bit fields are packed into registers from most significant bit (MSB) to least significant bit (LSB) in the order in which they are defined. Bit fields are packed in memory from most significant byte (MSbyte) to least significant byte (LSbyte).<br>For little-endian mode, bit fields are packed into registers from the LSB to the MSB in the order in which they are defined, and packed in memory from LSbyte to MSbyte.</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="http://mjfrazer.org/mjfrazer/bitfields/">大小端对位域打包方式的影响</a></p>
<p>大端场景下根据定义的顺序，从 MSB 开始排布到 LSB。<br>小端场景下根据定义的顺序，从 LSB 开始排布到 MSB。</p>
<ul>
<li>位域的类型可以是 unsigned &#x2F; signed</li>
<li>包含位域的结构体的大小和对齐值取决于定义位域所使用的数据类型<br>如 struct st { int a:4 }; 该结构体的大小为4，对齐值为4。</li>
<li>无名位域会影响结构体或联合体的大小和对齐值<br>如 struct st { char a:4; int :22; }; 该结构体的大小为4，对齐值为4。</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">	<span class="type">int</span> A:<span class="number">7</span>;</span><br><span class="line">	<span class="type">int</span> B:<span class="number">10</span>;</span><br><span class="line">	<span class="type">int</span> C:<span class="number">3</span>;</span><br><span class="line">	<span class="type">int</span> D:<span class="number">2</span>;</span><br><span class="line">	<span class="type">int</span> E:<span class="number">9</span>;</span><br><span class="line">&#125; x;</span><br><span class="line"></span><br><span class="line"><span class="number">1234567</span></span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">LEGEND: X = not used, MS = most significant, LS = least significant</span><br><span class="line"></span><br><span class="line">Big-endian <span class="keyword">register</span>																								</span><br><span class="line">MS														      LS</span><br><span class="line">A A	A A	A A	A B	B B	B B	B B	B B	B C	C C	D D	E E	E E	E E	E E	E X</span><br><span class="line"><span class="number">6</span> <span class="number">5</span>	<span class="number">4</span> <span class="number">3</span>	<span class="number">2</span> <span class="number">1</span>	<span class="number">0</span> <span class="number">9</span> <span class="number">8</span> <span class="number">7</span> <span class="number">6</span> <span class="number">5</span>	<span class="number">4</span> <span class="number">3</span>	<span class="number">2</span> <span class="number">1</span>	<span class="number">0</span> <span class="number">2</span>	<span class="number">1</span> <span class="number">0</span>	<span class="number">1</span> <span class="number">0</span>	<span class="number">8</span> <span class="number">7</span> <span class="number">6</span> <span class="number">5</span>	<span class="number">4</span> <span class="number">3</span>	<span class="number">2</span> <span class="number">1</span>	<span class="number">0</span> X</span><br><span class="line"><span class="number">31</span>															  <span class="number">0</span></span><br><span class="line"></span><br><span class="line">Big-endian memory																								</span><br><span class="line">Byte <span class="number">0</span>	        Byte <span class="number">1</span>	        Byte <span class="number">2</span>	        Byte <span class="number">3</span></span><br><span class="line">A A	A A A A A B B B B B B B B B B C C C D D E E E E	E E	E E	E X</span><br><span class="line"><span class="number">6</span> <span class="number">5</span>	<span class="number">4</span> <span class="number">3</span>	<span class="number">2</span> <span class="number">1</span>	<span class="number">0</span> <span class="number">9</span>	<span class="number">8</span> <span class="number">7</span>	<span class="number">6</span> <span class="number">5</span>	<span class="number">4</span> <span class="number">3</span>	<span class="number">2</span> <span class="number">1</span>	<span class="number">0</span> <span class="number">2</span>	<span class="number">1</span> <span class="number">0</span>	<span class="number">1</span> <span class="number">0</span>	<span class="number">8</span> <span class="number">7</span>	<span class="number">6</span> <span class="number">5</span>	<span class="number">4</span> <span class="number">3</span>	<span class="number">2</span> <span class="number">1</span>	<span class="number">0</span> X</span><br><span class="line"></span><br><span class="line">Little-endian <span class="keyword">register</span>																								</span><br><span class="line">MS												             LS</span><br><span class="line">X E	E E	E E	E E	E E	D D	C C	C B	B B	B B	B B	B B	B A	A A	A A	A A</span><br><span class="line">X <span class="number">8</span>	<span class="number">7</span> <span class="number">6</span>	<span class="number">5</span> <span class="number">4</span>	<span class="number">3</span> <span class="number">2</span>	<span class="number">1</span> <span class="number">0</span>	<span class="number">1</span> <span class="number">0</span>	<span class="number">2</span> <span class="number">1</span>	<span class="number">0</span> <span class="number">9</span>	<span class="number">8</span> <span class="number">7</span>	<span class="number">6</span> <span class="number">5</span>	<span class="number">4</span> <span class="number">3</span>	<span class="number">2</span> <span class="number">1</span>	<span class="number">0</span> <span class="number">6</span>	<span class="number">5</span> <span class="number">4</span>	<span class="number">3</span> <span class="number">2</span>	<span class="number">1</span> <span class="number">0</span></span><br><span class="line"><span class="number">31</span>															  <span class="number">0</span></span><br><span class="line"></span><br><span class="line">Little-endian memory																								</span><br><span class="line">Byte <span class="number">0</span>	        Byte <span class="number">1</span>	        Byte <span class="number">2</span>	        Byte <span class="number">3</span></span><br><span class="line">B A	A A	A A	A A	B B	B B	B B	B B	E E	D D	C C	C B	X E	E E	E E	E E</span><br><span class="line"><span class="number">0</span> <span class="number">6</span>	<span class="number">5</span> <span class="number">4</span>	<span class="number">3</span> <span class="number">2</span>	<span class="number">1</span> <span class="number">0</span>	<span class="number">8</span> <span class="number">7</span>	<span class="number">6</span> <span class="number">5</span>	<span class="number">4</span> <span class="number">3</span>	<span class="number">2</span> <span class="number">1</span>	<span class="number">1</span> <span class="number">0</span>	<span class="number">1</span> <span class="number">0</span>	<span class="number">2</span> <span class="number">1</span>	<span class="number">0</span> <span class="number">9</span>	X <span class="number">8</span>	<span class="number">7</span> <span class="number">6</span>	<span class="number">5</span> <span class="number">4</span>	<span class="number">3</span> <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="number">1234567891011121314151617181920212223</span></span><br></pre></td></tr></table></figure>

<p>以下面的数据类型为例。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">union</span> &#123;</span></span><br><span class="line">	<span class="type">unsigned</span> <span class="type">short</span> value;</span><br><span class="line">	<span class="type">unsigned</span> <span class="type">char</span> byte[<span class="number">2</span>];</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">		<span class="type">unsigned</span> <span class="type">short</span> one   : <span class="number">1</span>;</span><br><span class="line">		<span class="type">unsigned</span> <span class="type">short</span> two   : <span class="number">2</span>;</span><br><span class="line">		<span class="type">unsigned</span> <span class="type">short</span> three : <span class="number">3</span>;</span><br><span class="line">		<span class="type">unsigned</span> <span class="type">short</span> four  : <span class="number">4</span>;</span><br><span class="line">		<span class="type">unsigned</span> <span class="type">short</span> five  : <span class="number">5</span>;</span><br><span class="line">	&#125; field;</span><br><span class="line">&#125; u;</span><br><span class="line"></span><br><span class="line"><span class="number">1234567891011</span></span><br></pre></td></tr></table></figure>

<p>其排布为：<br>大端场景<br><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://i-blog.csdnimg.cn/blog_migrate/cc6e93aa08e0d07424e20802789150c7.png" alt="在这里插入图片描述"></p>
<p>小端场景<br><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://i-blog.csdnimg.cn/blog_migrate/585822dd5ffe728c8a3a325e1744ac62.png" alt="在这里插入图片描述"></p>
<p>可以通过下面的程序来验证一下。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="class"><span class="keyword">union</span> &#123;</span></span><br><span class="line">		<span class="type">unsigned</span> <span class="type">short</span> value;</span><br><span class="line">		<span class="type">unsigned</span> <span class="type">char</span> byte[<span class="number">2</span>];</span><br><span class="line">		<span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">			<span class="type">unsigned</span> <span class="type">short</span> one   : <span class="number">1</span>;</span><br><span class="line">			<span class="type">unsigned</span> <span class="type">short</span> two   : <span class="number">2</span>;</span><br><span class="line">			<span class="type">unsigned</span> <span class="type">short</span> three : <span class="number">3</span>;</span><br><span class="line">			<span class="type">unsigned</span> <span class="type">short</span> four  : <span class="number">4</span>;</span><br><span class="line">			<span class="type">unsigned</span> <span class="type">short</span> five  : <span class="number">5</span>;</span><br><span class="line">		&#125; field;</span><br><span class="line">	&#125; u;</span><br><span class="line"></span><br><span class="line">	u.value = <span class="number">0</span>;</span><br><span class="line">	u.field.one   = <span class="number">1</span>;</span><br><span class="line">	u.field.two   = <span class="number">2</span>;</span><br><span class="line">	u.field.three = <span class="number">3</span>;</span><br><span class="line">	u.field.four  = <span class="number">4</span>;</span><br><span class="line">	u.field.five  = <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;The fields are 1, 2, 3, 4, 5.\n&quot;</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;The entire hex value is 0x%04x\n&quot;</span>, u.value);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;The first byte is 0x%02x\n&quot;</span>, u.byte[<span class="number">0</span>]);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;The second byte is 0x%02x\n&quot;</span>, u.byte[<span class="number">1</span>]);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">1234567891011121314151617181920212223242526272829</span></span><br></pre></td></tr></table></figure>

<p>在 x86 小端，arm，aarch64 大小端场景下的测试结果如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">// x86 小端</span><br><span class="line">The fields are 1, 2, 3, 4, 5.</span><br><span class="line">The entire hex value is 0x151d</span><br><span class="line">The first byte is 0x1d</span><br><span class="line">The second byte is 0x15</span><br><span class="line"></span><br><span class="line">// aarch64_be</span><br><span class="line">The fields are 1, 2, 3, 4, 5.</span><br><span class="line">The entire hex value is 0xcd0a</span><br><span class="line">The first byte is 0xcd</span><br><span class="line">The second byte is 0x0a</span><br><span class="line"></span><br><span class="line">// armeb</span><br><span class="line">The fields are 1, 2, 3, 4, 5.</span><br><span class="line">The entire hex value is 0xcd0a</span><br><span class="line">The first byte is 0xcd</span><br><span class="line">The second byte is 0x0a</span><br><span class="line"></span><br><span class="line">// arm</span><br><span class="line">The fields are 1, 2, 3, 4, 5.</span><br><span class="line">The entire hex value is 0x151d</span><br><span class="line">The first byte is 0x1d</span><br><span class="line">The second byte is 0x15</span><br><span class="line"></span><br><span class="line">// aarch64</span><br><span class="line">The fields are 1, 2, 3, 4, 5.</span><br><span class="line">The entire hex value is 0x151d</span><br><span class="line">The first byte is 0x1d</span><br><span class="line">The second byte is 0x15</span><br><span class="line"></span><br><span class="line">123456789101112131415161718192021222324252627282930</span><br></pre></td></tr></table></figure>

<h3 id="字节序测试"><a href="#字节序测试" class="headerlink" title="字节序测试"></a>字节序测试</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">        <span class="keyword">union</span> &#123;</span><br><span class="line">                <span class="type">char</span> c;</span><br><span class="line">                <span class="type">int</span> i;</span><br><span class="line">        &#125; u;</span><br><span class="line">        u.i = <span class="number">0x11223344</span>;</span><br><span class="line">        <span class="keyword">if</span>(u.c == <span class="number">0x44</span>) &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;little-endian\n&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (u.c == <span class="number">0x11</span>) &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;big-endian\n&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;unknown\n&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">123456789101112131415161718</span></span><br></pre></td></tr></table></figure>

<h3 id="位序测试"><a href="#位序测试" class="headerlink" title="位序测试"></a>位序测试</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">union</span> &#123;</span><br><span class="line">	<span class="keyword">struct</span> &#123;</span><br><span class="line">		<span class="type">unsigned</span> <span class="type">char</span> a1:<span class="number">2</span>;</span><br><span class="line">		<span class="type">unsigned</span> <span class="type">char</span> a2:<span class="number">3</span>;</span><br><span class="line">		<span class="type">unsigned</span> <span class="type">char</span> a3:<span class="number">3</span>;</span><br><span class="line">	&#125; x;</span><br><span class="line">	<span class="type">unsigned</span> <span class="type">char</span> b;</span><br><span class="line">&#125; d;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span> <span class="params">(<span class="type">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	d.b = <span class="number">150</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;0x%x\n0x%x\n0x%x\n&quot;</span>, d.x.a1, d.x.a2, d.x.a3);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">123456789101112131415</span></span><br></pre></td></tr></table></figure>

<p>结果如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 150 == 0b1001 0110</span></span><br><span class="line"></span><br><span class="line">arm, aarch64</span><br><span class="line"><span class="comment">/* bit numbering: lsb 0</span></span><br><span class="line"><span class="comment"> * 0x2 （== 10）</span></span><br><span class="line"><span class="comment"> * 0x5 （== 101）</span></span><br><span class="line"><span class="comment"> * 0x4 （== 110）</span></span><br><span class="line"><span class="comment"> * /</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">armeb, aarch64_be</span></span><br><span class="line"><span class="comment">/* bit numbering: lsb 0</span></span><br><span class="line"><span class="comment"> * 0x2 （== 10）</span></span><br><span class="line"><span class="comment"> * 0x2 （== 010）</span></span><br><span class="line"><span class="comment"> * 0x6 （== 100）</span></span><br><span class="line"><span class="comment"> * /</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">123456789101112131415</span></span><br></pre></td></tr></table></figure>
<div class="article-footer fs14">
    <section id="share">
      <div class="header"><span>Share</span></div>
      <div class="body">
        <div class="link"><input class="copy-area" readonly="true" id="copy-link" value="http://liuluhua.github.io/2025/01/16/2-%E8%AF%AD%E8%A8%80-C%E8%AF%AD%E8%A8%80-%E4%BD%8D%E8%BF%90%E7%AE%97-%E5%AD%97%E8%8A%82%E5%BA%8F%E4%B8%8E%E4%BD%8D%E5%BA%8F%E8%AF%A6%E8%A7%A3-CSDN%E5%8D%9A%E5%AE%A2/" /></div>
        <div class="social-wrap dis-select"><a class="social share-item link" onclick="util.copy(&quot;copy-link&quot;, &quot;Copied!&quot;)"><img class="lazy"  src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/social/8411ed322ced6.svg" /></a></div>
        
      </div>
    </section>
    </div>
</article>
<div class="related-wrap" id="read-next"><section class="body"><div class="item" id="prev"><div class="note">Newer</div><a href="/2025/01/16/2-%E8%AF%AD%E8%A8%80-C%E8%AF%AD%E8%A8%80-%E4%BD%8D%E8%BF%90%E7%AE%97-%E5%AD%97%E8%8A%82%E5%BA%8F-byte-order-%E5%92%8C%E4%BD%8D%E5%BA%8F-bit-order-%E5%AD%97%E8%8A%82%E5%BA%8F%E8%B5%B7%E5%A7%8B%E4%BD%8D%E8%AE%A1%E7%AE%97-CSDN%E5%8D%9A%E5%AE%A2/">字节序(byte order)和位序(bit order)_字节序起始位计算-CSDN博客</a></div><div class="item" id="next"><div class="note">Older</div><a href="/2025/01/10/2-%E8%AF%AD%E8%A8%80-%E7%BB%93%E6%9E%84%E7%AE%97%E6%B3%95-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E5%9F%BA%E7%A1%80/">面向对象基础</a></div></section></div>

<div class="related-wrap" id="related-posts">
    <section class='header'>
      <div class='title cap theme'>您可能感兴趣的文章</div>
    </section>
    <section class='body'>
    <div class="related-posts"><a class="item" href="/2024/10/30/1-平台-NAS-RK3568-软路由-OpenWRT/" title="RK3568 软路由-OpenWRT"><span class="title">RK3568 软路由-OpenWRT</span></a><a class="item" href="/2024/10/18/1-平台-嵌入式-嵌入式交叉编译/" title="嵌入式交叉编译"><span class="title">嵌入式交叉编译</span></a><a class="item" href="/2024/10/17/1-平台-嵌入式-嵌入式初始配置/" title="嵌入式初始配置"><span class="title">嵌入式初始配置</span></a><a class="item" href="/2024/09/16/1-平台-服务器-Obsidian在ios端利用git-同步/" title="Obsidian在ios端利用git 同步"><span class="title">Obsidian在ios端利用git 同步</span></a><a class="item" href="/2024/06/13/2-语言-C语言-位运算-位运算/" title="位运算"><span class="title">位运算</span></a></div></section></div>


  <div class="related-wrap md-text" id="comments">
    <section class='header cmt-title cap theme'>
      <p>快来参与讨论吧~</p>

    </section>
    <section class='body cmt-body utterances'>
      

<svg class="loading" style="vertical-align:middle;fill:currentColor;overflow:hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2709"><path d="M832 512c0-176-144-320-320-320V128c211.2 0 384 172.8 384 384h-64zM192 512c0 176 144 320 320 320v64C300.8 896 128 723.2 128 512h64z" p-id="2710"></path></svg>

<div id="utterances" repo="liuluhua/liuluhua.github.io" issue-term="title" theme="preferred-color-scheme" label="💬"></div>

    </section>
  </div>



<footer class="page-footer footnote"><hr><div class="sitemap"><div class="sitemap-group"><span class="fs15">博客</span><a href="/">近期</a><a href="/categories/">标签</a><a href="/archives/">归档</a></div><div class="sitemap-group"><span class="fs15">项目</span><a target="_blank" rel="noopener" href="https://github.com/liuluhua/">GitHub</a><a target="_blank" rel="noopener" href="https://tongji.baidu.com/">百度统计</a></div><div class="sitemap-group"><span class="fs15">社交</span><a href="/">友链</a><a href="/about/#comments">留言板</a></div><div class="sitemap-group"><span class="fs15">更多</span><a href="/about/">关于本站</a></div></div><div class="text"><p>本站使用 <a target="_blank" rel="noopener" href="https://github.com/xaoxuu/hexo-theme-stellar/tree/1.30.1">Stellar 1.30.1</a> 主题创建。</p>
<script color="0,255,255" opacity="1" zIndex="-1" count="70" src="https://cdn.staticfile.org/canvas-nest.js/1.0.1/canvas-nest.js"></script>
<center>
</br>
</br>
<!--不蒜子计数器-->
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<!--添加一个访问量-->
<span>
    本"<span style="color: rgb(13, 109, 252); font-weight: bold;">页面</ a></span>"访问 <span id="busuanzi_value_page_pv" style="color: rgb(13, 109, 252); font-weight: bold;"></span> 次 | 👀总访问 <span id="busuanzi_value_site_pv" style="color: rgb(13, 109, 252); font-weight: bold;"></span>                次 | 🥷总访客 <span id="busuanzi_value_site_uv" style="color: rgb(13, 109, 252); font-weight: bold;"></span> 人
</span>
</br>
</br>
<script type="text/javascript">
function show_runtime() {
    window.setTimeout("show_runtime()", 1000);
    X = new Date("05/20/2023 05:20:00");
    Y = new Date();
    T = (Y.getTime() - X.getTime());
    M = 24 * 60 * 60 * 1000;
    a = T / M;
    A = Math.floor(a);
    b = (a - A) * 24;
    B = Math.floor(b);
    c = (b - B) * 60;
    C = Math.floor((b - B) * 60);
    D = Math.floor((c - C) * 60);
    runtime_span.innerHTML = "⏱️本站已运行 " + A + "天" + B + "小时" + C + "分" + D + "秒"
}
show_runtime();
</script>
<span id="runtime_span"></span>
</center>
</div></footer>
<div class="main-mask" onclick="sidebar.dismiss()"></div></div><aside class="l_right">
<div class="widgets">



<widget class="widget-wrapper toc" id="data-toc" collapse="false"><div class="widget-header dis-select"><span class="name">On This Page</span><a class="cap-action" onclick="sidebar.toggleTOC()" ><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6h11m-11 6h11m-11 6h11M4 6h1v4m-1 0h2m0 8H4c0-1 2-2 2-3s-1-1.5-2-1"/></svg></a></div><div class="widget-body"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Endianness"><span class="toc-text">Endianness</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E5%86%99%E5%87%BA%E5%85%BC%E5%AE%B9%E5%A4%A7%E5%B0%8F%E7%AB%AF%E7%9A%84%E4%BB%A3%E7%A0%81"><span class="toc-text">如何写出兼容大小端的代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Bit-numbering"><span class="toc-text">Bit numbering</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E9%99%85%E6%9C%BA%E5%99%A8%E7%B1%BB%E5%9E%8B"><span class="toc-text">实际机器类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%8D%E5%9F%9F-Bit-Fields"><span class="toc-text">位域 Bit Fields</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E8%8A%82%E5%BA%8F%E6%B5%8B%E8%AF%95"><span class="toc-text">字节序测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%8D%E5%BA%8F%E6%B5%8B%E8%AF%95"><span class="toc-text">位序测试</span></a></li></ol></div><div class="widget-footer">

<a class="top" onclick="util.scrollTop()"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="1.5"><path d="M2 12c0-4.714 0-7.071 1.464-8.536C4.93 2 7.286 2 12 2c4.714 0 7.071 0 8.535 1.464C22 4.93 22 7.286 22 12c0 4.714 0 7.071-1.465 8.535C19.072 22 16.714 22 12 22s-7.071 0-8.536-1.465C2 19.072 2 16.714 2 12Z"/><path stroke-linecap="round" stroke-linejoin="round" d="m9 15.5l3-3l3 3m-6-4l3-3l3 3"/></g></svg><span>Scroll to Top</span></a><a class="buttom" onclick="util.scrollComment()"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M10.46 1.25h3.08c1.603 0 2.86 0 3.864.095c1.023.098 1.861.3 2.6.752a5.75 5.75 0 0 1 1.899 1.899c.452.738.654 1.577.752 2.6c.095 1.004.095 2.261.095 3.865v1.067c0 1.141 0 2.036-.05 2.759c-.05.735-.153 1.347-.388 1.913a5.75 5.75 0 0 1-3.112 3.112c-.805.334-1.721.408-2.977.43a10.81 10.81 0 0 0-.929.036c-.198.022-.275.054-.32.08c-.047.028-.112.078-.224.232c-.121.166-.258.396-.476.764l-.542.916c-.773 1.307-2.69 1.307-3.464 0l-.542-.916a10.605 10.605 0 0 0-.476-.764c-.112-.154-.177-.204-.224-.232c-.045-.026-.122-.058-.32-.08c-.212-.023-.49-.03-.93-.037c-1.255-.021-2.171-.095-2.976-.429A5.75 5.75 0 0 1 1.688 16.2c-.235-.566-.338-1.178-.389-1.913c-.049-.723-.049-1.618-.049-2.76v-1.066c0-1.604 0-2.86.095-3.865c.098-1.023.3-1.862.752-2.6a5.75 5.75 0 0 1 1.899-1.899c.738-.452 1.577-.654 2.6-.752C7.6 1.25 8.857 1.25 10.461 1.25M6.739 2.839c-.914.087-1.495.253-1.959.537A4.25 4.25 0 0 0 3.376 4.78c-.284.464-.45 1.045-.537 1.96c-.088.924-.089 2.11-.089 3.761v1c0 1.175 0 2.019.046 2.685c.045.659.131 1.089.278 1.441a4.25 4.25 0 0 0 2.3 2.3c.515.214 1.173.294 2.429.316h.031c.398.007.747.013 1.037.045c.311.035.616.104.909.274c.29.17.5.395.682.645c.169.232.342.525.538.856l.559.944a.52.52 0 0 0 .882 0l.559-.944c.196-.331.37-.624.538-.856c.182-.25.392-.476.682-.645c.293-.17.598-.24.909-.274c.29-.032.639-.038 1.037-.045h.032c1.255-.022 1.913-.102 2.428-.316a4.25 4.25 0 0 0 2.3-2.3c.147-.352.233-.782.278-1.441c.046-.666.046-1.51.046-2.685v-1c0-1.651 0-2.837-.089-3.762c-.087-.914-.253-1.495-.537-1.959a4.25 4.25 0 0 0-1.403-1.403c-.464-.284-1.045-.45-1.96-.537c-.924-.088-2.11-.089-3.761-.089h-3c-1.651 0-2.837 0-3.762.089" clip-rule="evenodd"/><path fill="currentColor" d="M9 11a1 1 0 1 1-2 0a1 1 0 0 1 2 0m4 0a1 1 0 1 1-2 0a1 1 0 0 1 2 0m4 0a1 1 0 1 1-2 0a1 1 0 0 1 2 0"/></svg><span>Join Discussion</span></a></div></widget>
</div></aside><div class='float-panel blur'>
  <button type='button' style='display:none' class='laptop-only rightbar-toggle mobile' onclick='sidebar.rightbar()'>
    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6h11m-11 6h11m-11 6h11M4 6h1v4m-1 0h2m0 8H4c0-1 2-2 2-3s-1-1.5-2-1"/></svg>
  </button>
  <button type='button' style='display:none' class='mobile-only leftbar-toggle mobile' onclick='sidebar.leftbar()'>
    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="1.5"><path d="M2 11c0-3.771 0-5.657 1.172-6.828C4.343 3 6.229 3 10 3h4c3.771 0 5.657 0 6.828 1.172C22 5.343 22 7.229 22 11v2c0 3.771 0 5.657-1.172 6.828C19.657 21 17.771 21 14 21h-4c-3.771 0-5.657 0-6.828-1.172C2 18.657 2 16.771 2 13z"/><path id="sep" stroke-linecap="round" d="M5.5 10h6m-5 4h4m4.5 7V3"/></g></svg>
  </button>
</div>
</div><div class="scripts">
<script type="text/javascript">
  const ctx = {
    date_suffix: {
      just: `Just`,
      min: `minutes ago`,
      hour: `hours ago`,
      day: `days ago`,
    },
    root : `/`,
    tag_plugins: {
      chat: Object.assign(),
    }
  };

  // required plugins (only load if needs)
  if (`local_search`) {
    ctx.search = {};
    ctx.search.service = `local_search`;
    if (ctx.search.service == 'local_search') {
      let service_obj = Object.assign({}, `{"field":"all","path":"/search.json","content":true,"odeblock":true,"sort":"-date"}`);
      ctx.search[ctx.search.service] = service_obj;
    }
  }
  const def = {
    avatar: `https://raw.staticdn.net/liuluhua/liuluhua.github.io/ImageBed/BlogRes/avatar.jpg`,
    cover: `https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/cover/76b86c0226ffd.svg`,
  };
  const deps = {
    jquery: `https://cdn.bootcdn.net/ajax/libs/jquery/3.7.1/jquery.min.js`,
    marked: `https://cdn.bootcdn.net/ajax/libs/marked/4.0.18/marked.min.js`
  }
  

</script>

<script type="text/javascript">
  function RunItem() {
    this.list = []; // 存放回调函数
    this.start = () => {
      for (var i = 0; i < this.list.length; i++) {
        this.list[i].run();
      }
    };
    this.push = (fn, name, setRequestAnimationFrame = true) => {
      let myfn = fn
      if (setRequestAnimationFrame) {
        myfn = () => {
          utils.requestAnimationFrame(fn)
        }
      }
      var f = new Item(myfn, name);
      this.list.push(f);
    };
    this.remove = (name) => {
      for (let index = 0; index < this.list.length; index++) {
        const e = this.list[index];
        if (e.name == name) {
          this.list.splice(index, 1);
        }
      }
    }
    // 构造一个可以run的对象
    function Item(fn, name) {
      // 函数名称
      this.name = name || fn.name;
      // run方法
      this.run = () => {
        try {
          fn()
        } catch (error) {
          console.log(error);
        }
      };
    }
  }

  const utils = {
    // 懒加载 css https://github.com/filamentgroup/loadCSS
    css: (href, before, media, attributes) => {
      var doc = window.document;
      var ss = doc.createElement("link");
      var ref;
      if (before) {
        ref = before;
      } else {
        var refs = (doc.body || doc.getElementsByTagName("head")[0]).childNodes;
        ref = refs[refs.length - 1];
      }
      var sheets = doc.styleSheets;
      if (attributes) {
        for (var attributeName in attributes) {
          if (attributes.hasOwnProperty(attributeName)) {
            ss.setAttribute(attributeName, attributes[attributeName]);
          }
        }
      }
      ss.rel = "stylesheet";
      ss.href = href;
      ss.media = "only x";
      function ready(cb) {
        if (doc.body) {
          return cb();
        }
        setTimeout(function () {
          ready(cb);
        });
      }
      ready(function () {
        ref.parentNode.insertBefore(ss, before ? ref : ref.nextSibling);
      });
      var onloadcssdefined = function (cb) {
        var resolvedHref = ss.href;
        var i = sheets.length;
        while (i--) {
          if (sheets[i].href === resolvedHref) {
            return cb();
          }
        }
        setTimeout(function () {
          onloadcssdefined(cb);
        });
      };
      function loadCB() {
        if (ss.addEventListener) {
          ss.removeEventListener("load", loadCB);
        }
        ss.media = media || "all";
      }
      if (ss.addEventListener) {
        ss.addEventListener("load", loadCB);
      }
      ss.onloadcssdefined = onloadcssdefined;
      onloadcssdefined(loadCB);
      return ss;
    },

    js: (src, opt) => new Promise((resolve, reject) => {
      var script = document.createElement('script');
      if (src.startsWith('/')) {
        src = ctx.root + src.substring(1);
      }
      script.src = src;
      if (opt) {
        for (let key of Object.keys(opt)) {
          script[key] = opt[key]
        }
      } else {
        // 默认异步，如果需要同步，第二个参数传入 {} 即可
        script.async = true
      }
      script.onerror = reject
      script.onload = script.onreadystatechange = function () {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    }),

    jq: (fn) => {
      if (typeof jQuery === 'undefined') {
        utils.js(deps.jquery).then(fn)
      } else {
        fn()
      }
    },

    onLoading: (el) => {
      if (el) {
        $(el).append('<div class="loading-wrap"><svg xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="2"><path stroke-dasharray="60" stroke-dashoffset="60" stroke-opacity=".3" d="M12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3Z"><animate fill="freeze" attributeName="stroke-dashoffset" dur="1.3s" values="60;0"/></path><path stroke-dasharray="15" stroke-dashoffset="15" d="M12 3C16.9706 3 21 7.02944 21 12"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.3s" values="15;0"/><animateTransform attributeName="transform" dur="1.5s" repeatCount="indefinite" type="rotate" values="0 12 12;360 12 12"/></path></g></svg></div>');
      }
    },
    onLoadSuccess: (el) => {
      if (el) {
        $(el).find('.loading-wrap').remove();
      }
    },
    onLoadFailure: (el) => {
      if (el) {
        $(el).find('.loading-wrap svg').remove();
        $(el).find('.loading-wrap').append('<svg xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path stroke-dasharray="60" stroke-dashoffset="60" d="M12 3L21 20H3L12 3Z"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.5s" values="60;0"/></path><path stroke-dasharray="6" stroke-dashoffset="6" d="M12 10V14"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.6s" dur="0.2s" values="6;0"/></path></g><circle cx="12" cy="17" r="1" fill="currentColor" fill-opacity="0"><animate fill="freeze" attributeName="fill-opacity" begin="0.8s" dur="0.4s" values="0;1"/></circle></svg>');
        $(el).find('.loading-wrap').addClass('error');
      }
    },
    request: (el, url, callback, onFailure) => {
      let retryTimes = 3;
      utils.onLoading(el);
      function req() {
        return new Promise((resolve, reject) => {
          let status = 0; // 0 等待 1 完成 2 超时
          let timer = setTimeout(() => {
            if (status === 0) {
              status = 2;
              timer = null;
              reject('请求超时');
              if (retryTimes == 0) {
                onFailure();
              }
            }
          }, 5000);
          fetch(url).then(function (response) {
            if (status !== 2) {
              clearTimeout(timer);
              resolve(response);
              timer = null;
              status = 1;
            }
            if (response.ok) {
              return response;
            }
            throw new Error('Network response was not ok.');
          }).then(function (data) {
            retryTimes = 0;
            utils.onLoadSuccess(el);
            callback(data);
          }).catch(function (error) {
            if (retryTimes > 0) {
              retryTimes -= 1;
              setTimeout(() => {
                req();
              }, 5000);
            } else {
              utils.onLoadFailure(el);
              onFailure();
            }
          });
        });
      }
      req();
    },
    /********************** requestAnimationFrame ********************************/
    // 1、requestAnimationFrame 会把每一帧中的所有 DOM 操作集中起来，在一次重绘或回流中就完成，并且重绘或回流的时间间隔紧紧跟随浏览器的刷新频率，一般来说，这个频率为每秒60帧。
    // 2、在隐藏或不可见的元素中，requestAnimationFrame 将不会进行重绘或回流，这当然就意味着更少的的 cpu，gpu 和内存使用量。
    requestAnimationFrame: (fn) => {
      if (!window.requestAnimationFrame) {
        window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame;
      }
      window.requestAnimationFrame(fn)
    },
    dark: {},
  };

  // utils.dark.mode 当前模式 dark or light
  // utils.dark.toggle() 暗黑模式触发器
  // utils.dark.push(callBack[,"callBackName"]) 传入触发器回调函数
  utils.dark.method = {
    toggle: new RunItem(),
  };
  utils.dark = Object.assign(utils.dark, {
    push: utils.dark.method.toggle.push,
  });
</script>
<script>
  const sidebar = {
    leftbar: () => {
      if (l_body) {
        l_body.toggleAttribute('leftbar');
        l_body.removeAttribute('rightbar');
      }
    },
    rightbar: () => {
      if (l_body) {
        l_body.toggleAttribute('rightbar');
        l_body.removeAttribute('leftbar');
      }
    },
    dismiss: () => {
      if (l_body) {
        l_body.removeAttribute('leftbar');
        l_body.removeAttribute('rightbar');
      }
    },
    toggleTOC: () => {
      document.querySelector('#data-toc').classList.toggle('collapse');
    }
  }
</script>
<script type="text/javascript">
  (() => {
    const tagSwitchers = document.querySelectorAll('.tag-subtree.parent-tag > a > .tag-switcher-wrapper')
    for (const tagSwitcher of tagSwitchers) {
      tagSwitcher.addEventListener('click', (e) => {
        const parent = e.target.closest('.tag-subtree.parent-tag')
        parent.classList.toggle('expanded')
        e.preventDefault()
      })
    }

    // Get active tag from query string, then activate it.
    const urlParams = new URLSearchParams(window.location.search)
    const activeTag = urlParams.get('tag')
    if (activeTag) {
      let tag = document.querySelector(`.tag-subtree[data-tag="${activeTag}"]`)
      if (tag) {
        tag.querySelector('a').classList.add('active')
        
        while (tag) {
          tag.classList.add('expanded')
          tag = tag.parentElement.closest('.tag-subtree.parent-tag')
        }
      }
    }
  })()
</script>


<!-- required -->
<script src="/js/main.js?v=1.30.1" defer></script>

<script type="text/javascript">
  const applyTheme = (theme) => {
    if (theme === 'auto') {
      document.documentElement.removeAttribute('data-theme')
    } else {
      document.documentElement.setAttribute('data-theme', theme)
    }

    applyThemeToGiscus(theme)
  }

  const applyThemeToGiscus = (theme) => {
    theme = theme === 'auto' ? 'preferred_color_scheme' : theme

    const cmt = document.getElementById('giscus')
    if (cmt) {
      // This works before giscus load.
      cmt.setAttribute('data-theme', theme)
    }

    const iframe = document.querySelector('#comments > section.giscus > iframe')
    if (iframe) {
      // This works after giscus loaded.
      const src = iframe.src
      const newSrc = src.replace(/theme=[\w]+/, `theme=${theme}`)
      iframe.src = newSrc
    }
  }

  const switchTheme = () => {
    // light -> dark -> auto -> light -> ...
    const currentTheme = document.documentElement.getAttribute('data-theme')
    let newTheme;
    switch (currentTheme) {
      case 'light':
        newTheme = 'dark'
        break
      case 'dark':
        newTheme = 'auto'
        break
      default:
        newTheme = 'light'
    }
    applyTheme(newTheme)
    window.localStorage.setItem('Stellar.theme', newTheme)
    utils.dark.mode = newTheme === 'auto' ? (window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light") : newTheme;
    utils.dark.method.toggle.start();

    const messages = {
      light: `Switched to Light Mode`,
      dark: `Switched to Dark Mode`,
      auto: `Switched to Auto Mode`,
    }
    hud?.toast?.(messages[newTheme])
  }

  (() => {
    // Apply user's preferred theme, if any.
    const theme = window.localStorage.getItem('Stellar.theme')
    if (theme !== null) {
      applyTheme(theme)
    } else {
      utils.dark.mode = window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light";
    }
    utils.dark.method.toggle.start();
  })()
</script>


<!-- optional -->

  <script type="module">
  const el = document.querySelector("#comments #utterances");
  util.viewportLazyload(el, load_utterances, false);

  function load_utterances() {
    if (!el) return;
    try {
      el.innerHTML = '';
    } catch (error) {
      console.error(error);
    }
    const script = document.createElement('script');
    script.src = 'https://utteranc.es/client.js';
    script.async = true;
    for (const key of Object.keys(el.attributes)) {
      const attr = el.attributes[key];
      if (['class', 'id'].includes(attr.name) === false) {
        script.setAttribute(attr.name, attr.value);
      }
    }
    el.appendChild(script);
  }
</script>




<script defer>
  window.addEventListener('DOMContentLoaded', (event) => {
    ctx.services = Object.assign({}, JSON.parse(`{"mdrender":{"js":"/js/services/mdrender.js"},"siteinfo":{"js":"/js/services/siteinfo.js","api":null},"ghinfo":{"js":"/js/services/ghinfo.js"},"sites":{"js":"/js/services/sites.js"},"friends":{"js":"/js/services/friends.js"},"timeline":{"js":"/js/services/timeline.js"},"fcircle":{"js":"/js/services/fcircle.js"},"weibo":{"js":"/js/services/weibo.js"},"memos":{"js":"/js/services/memos.js"}}`));
    for (let id of Object.keys(ctx.services)) {
      const js = ctx.services[id].js;
      if (id == 'siteinfo') {
        ctx.cardlinks = document.querySelectorAll('a.link-card[cardlink]');
        if (ctx.cardlinks?.length > 0) {
          utils.js(js, { defer: true }).then(function () {
            setCardLink(ctx.cardlinks);
          });
        }
      } else if (id == 'voice') {
        ctx.voiceAudios = document.querySelectorAll('.voice>audio');
        if (ctx.voiceAudios?.length > 0) {
          utils.js(js, { defer: true }).then(function () {
            createVoiceDom(ctx.voiceAudios);
          });
        }
      } else if (id == 'video') {
        ctx.videos = document.querySelectorAll('.video>video');
        if (ctx.videos?.length > 0) {
          utils.js(js, { defer: true }).then(function () {
            videoEvents(ctx.videos);
          });
        }
      } else if (id == 'download-file') {
        ctx.files = document.querySelectorAll('.file');
        if (ctx.files?.length > 0) {
          utils.js(js, { defer: true }).then(function () {
            downloadFileEvent(ctx.files);
          });
        }
      } else {
        const els = document.getElementsByClassName(`ds-${id}`);
        if (els?.length > 0) {
          utils.jq(() => {
            if (id == 'timeline' || 'memos' || 'marked') {
              utils.js(deps.marked).then(function () {
                utils.js(js, { defer: true });
              });
            } else {
              utils.js(js, { defer: true });
            }
          });
        }
      }
    }

    // chat iphone time
    let phoneTimes = document.querySelectorAll('.chat .status-bar .time');

    if (phoneTimes.length > 0) {
      NowTime();
      var date = new Date();
      var sec = date.getSeconds();
      var firstAdjustInterval = setInterval(firstAdjustTime, 1000 * (60 - sec));
    }

    function firstAdjustTime() {
      NowTime();
      clearInterval(firstAdjustInterval);
      setInterval(NowTime, 1000 * 60);
    }

    function NowTime() {
      for (let i = 0; i < phoneTimes.length; ++i) {
        var timeSpan = phoneTimes[i];
        var date = new Date();
        var hour = date.getHours();
        var min = date.getMinutes();
        timeSpan.innerHTML = check(hour) + ":" + check(min);
      }
    };

    function check(val) {
      if (val < 10) {
        return ("0" + val);
      }
      return (val);
    }

    // chat quote
    const chat_quote_obverser = new IntersectionObserver((entries, observer) => {
      entries.filter((entry) => { return entry.isIntersecting }).sort((a, b) => a.intersectionRect.y !== b.intersectionRect.y ? a.intersectionRect.y - b.intersectionRect.y : a.intersectionRect.x - b.intersectionRect.x).forEach((entry, index) => {
          observer.unobserve(entry.target);
          setTimeout(() => {
            entry.target.classList.add('quote-blink');
            setTimeout(() => {
              entry.target.classList.remove('quote-blink');
            }, 1000);
          }, Math.max(100, 16) * (index + 1));
        });
    });

    var chatQuotes = document.querySelectorAll(".chat .talk .quote");
    chatQuotes.forEach((quote) => {
      quote.addEventListener('click', function () {
        var chatCellDom = document.getElementById("quote-" + quote.getAttribute("quotedCellTag"));
        if (chatCellDom) {
          var chatDiv = chatCellDom.parentElement;
          var mid = chatDiv.clientHeight / 2;
          var offsetTop = chatCellDom.offsetTop;
          if (offsetTop > mid - chatCellDom.clientHeight / 2) {
            chatDiv.scrollTo({
              top: chatCellDom.offsetTop - mid + chatCellDom.clientHeight / 2,
              behavior: "smooth"
            });
          } else {
            chatDiv.scrollTo({
              top: 0,
              behavior: "smooth"
            });
          }
          chat_quote_obverser.observe(chatCellDom);
        }
      });
    });
  });
</script>

<script>
  window.addEventListener('DOMContentLoaded', (event) => {
    ctx.search = {
      path: `/search.json`,
    }
    utils.js('/js/search/local-search.js', { defer: true });
  });
</script><script>
  window.FPConfig = {
    delay: 0,
    ignoreKeywords: [],
    maxRPS: 5,
    hoverDelay: 25
  };
</script>
<script defer src="https://cdn.bootcdn.net/ajax/libs/flying-pages/2.1.2/flying-pages.min.js"></script><script defer src="https://cdn.bootcdn.net/ajax/libs/vanilla-lazyload/17.8.4/lazyload.min.js"></script>
<script>
  // https://www.npmjs.com/package/vanilla-lazyload
  // Set the options globally
  // to make LazyLoad self-initialize
  window.lazyLoadOptions = {
    elements_selector: ".lazy",
  };
  // Listen to the initialization event
  // and get the instance of LazyLoad
  window.addEventListener(
    "LazyLoad::Initialized",
    function (event) {
      window.lazyLoadInstance = event.detail.instance;
    },
    false
  );
  document.addEventListener('DOMContentLoaded', function () {
    window.lazyLoadInstance?.update();
  });
</script><script>
  ctx.fancybox = {
    selector: `.timenode p>img`,
    css: `https://cdn.bootcdn.net/ajax/libs/fancyapps-ui/5.0.22/fancybox/fancybox.min.css`,
    js: `https://cdn.bootcdn.net/ajax/libs/fancyapps-ui/5.0.22/fancybox/fancybox.umd.min.js`
  };
  var selector = '[data-fancybox]:not(.error)';
  if (ctx.fancybox.selector) {
    selector += `, ${ctx.fancybox.selector}`
  }
  var needFancybox = document.querySelectorAll(selector).length !== 0;
  if (!needFancybox) {
    const els = document.getElementsByClassName('ds-memos');
    if (els != undefined && els.length > 0) {
      needFancybox = true;
    }
  }
  if (needFancybox) {
    utils.css(ctx.fancybox.css);
    utils.js(ctx.fancybox.js, { defer: true }).then(function () {
      Fancybox.bind(selector, {
        hideScrollbar: false,
        Thumbs: {
          autoStart: false,
        },
        caption: (fancybox, slide) => {
          return slide.triggerEl.alt || slide.triggerEl.dataset.caption || null
        }
      });
    })
  }
</script>
<script>
  window.addEventListener('DOMContentLoaded', (event) => {
    const swiper_api = document.getElementById('swiper-api');
    if (swiper_api != undefined) {
      utils.css(`https://unpkg.com/swiper@10.3.1/swiper-bundle.min.css`);
      utils.js(`https://unpkg.com/swiper@10.3.1/swiper-bundle.min.js`, { defer: true }).then(function () {
        const effect = swiper_api.getAttribute('effect') || '';
        var swiper = new Swiper('.swiper#swiper-api', {
          slidesPerView: 'auto',
          spaceBetween: 8,
          centeredSlides: true,
          effect: effect,
          rewind: true,
          pagination: {
            el: '.swiper-pagination',
            clickable: true,
          },
          navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
          },
        });
      })
    }
  });
</script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    window.codeElements = document.querySelectorAll('.code');
    if (window.codeElements.length > 0) {
      ctx.copycode = {
        default_text: `Copy`,
        success_text: `Copied`,
        toast: `复制成功`,
      };
      utils.js('/js/plugins/copycode.js');
    }
  });
</script><script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?da53de6b993ed1e1aa3bb704f307c05b";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- inject -->

</div></body></html>
